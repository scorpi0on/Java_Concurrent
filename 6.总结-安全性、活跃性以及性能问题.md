# 安全性、活跃性以及性能问题

## 安全性问题

1. 数据竞争

   > **存在共享数据并且该数据会发生变化，通俗地讲就是有多个线程会同时读写同一数据**

2. 条件竞争

   > **竞态条件，指的是程序的执行结果依赖线程执行的顺序**

## 活跃性问题

1. 死锁

2. 活锁 

   > **有时线程虽然没有发生阻塞，但仍然会存在执行不下去的情况，这就是所谓的“活锁”**

   - 处理方法
     1. 增加随机等待时间

3. 饥饿

   > **所谓“饥饿”指的是线程因无法访问所需资源而无法执行下去的情况**。

   - 处理方法：
     1. 保证资源充足
     2. 公平地分配资源 --- 公平锁：顺序处理线程
     3. 避免持有锁的线程长时间执行。

## 性能问题

阿姆达尔（Amdahl）定律
$$
S=\frac{1}{(1−p)+\frac{p}{n}}
$$


	> 公式里的 n 可以理解为 CPU 的核数，p 可以理解为并行百分比，那（1-p）就是串行百分比了，也就是我们假设的 5%。我们再假设 CPU 的核数（也就是 n）无穷大，那加速比 S 的极限就是 20。也就是说，如果我们的串行率是 5%，那么我们无论采用什么技术，最高也就只能提高 20 倍的性能。
	>
	> 

- 三个指标非常重要
  1. 吞吐量
  2. 延迟
  3. 并发量

 